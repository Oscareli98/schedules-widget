!function($){function t(){var t=$(".mins-remaining");t.text(n()),m()===w||r()===w?($(".in-schedule").hide(),$(".no-schedule").show(),$(".lower .title").text("normal schedule")):($(".in-schedule").show(),$(".no-schedule").hide(),$(".lower .title").text("today's schedule")),e(),$(".cur-schedule").text(m().name);var a=r();$("#in").text(a.name),$("#started").text(u(a.start)),s()===w?($("#next").html("nothing"),$("#at").html(u(a.end))):($("#next").text(s().name),$("#at").text(u(s().start)))}function e(){var t=m(),e=$(".lower");$.each(t.periods,function(t,n){var r='<div class="period"> <div class="container"> <p class="name">'+h(n.name)+'</p> <div class="detail"> <p class="times">'+u(n.start)+" â€“ "+u(n.end)+'</p> <p class="length">'+a(n)+" minutes</p></div> </div></div>";e.append(r)})}function n(){var t=r();if("noschool"===t.name)return 0;var e=o(),n=i(t.end)-e;return n}function a(t){return i(t.end)-i(t.start)}function r(){var t=o(),e=m();if(e===w)return w;var n=w;return $.each(e.periods,function(e,a){var r=i(a.start),s=i(a.end);return t>=r&&s>t?(n=a,!1):void 0}),n}function s(){var t=r(),e=m(),n=$.inArray(t,e.periods);return-1===n||n==e.periods.length-1?w:e.periods[n+1]}function d(){}function i(t){var e=t.split(":"),n=parseInt(e[0],10),a=parseInt(e[1],10),r=60*n+a;return r}function u(t){var e=t.split(":"),n=parseInt(e[0],10);return n>12&&(n%=12),n+":"+e[1]}function o(){var t=new Date;return 60*t.getHours()+t.getMinutes()}function m(){var t=["sun","mon","tue","wed","thu","fri","sat"],e=new Date;if($.inArray(e,g))return w;var n=e.getDay(),a=t[n];return x[a]}function h(t){return/^\d.*/.test(t)?t+" period":t}function c(t,e){for(var n=[];e>=t;)n.push(t),t=new Date(t.setDate(t.getDate()+1));return n}var l={name:"normal A schedule",days:["mon"],periods:[{name:"1st",start:"8:15",end:"9:50"},{name:"2nd",start:"9:55",end:"11:25"},{name:"3rd",start:"11:35",end:"13:05"},{name:"lunch",start:"13:05",end:"14:00"},{name:"4th",start:"14:05",end:"15:40"}]},p={name:"normal B schedule",days:["tue","thu"],periods:[{name:"5th",start:"8:15",end:"9:50"},{name:"6th",start:"9:55",end:"11:25"},{name:"7th",start:"11:35",end:"13:05"},{name:"lunch",start:"13:05",end:"14:00"},{name:"8th",start:"14:05",end:"15:40"},{name:"9th",start:"15:45",end:"23:40"}]},v={name:"advisory schedule",days:["wed"],periods:[{name:"1st",start:"8:15",end:"9:40"},{name:"advisory",start:"9:45",end:"10:25"},{name:"2nd",start:"10:30",end:"11:50"},{name:"3rd",start:"11:55",end:"13:15"},{name:"lunch",start:"13:15",end:"14:10"},{name:"4th",start:"14:15",end:"15:40"}]},f={name:"normal A schedule",days:[],periods:[{name:"5th",start:"8:15",end:"9:50"},{name:"6th",start:"9:55",end:"11:25"},{name:"7th",start:"11:35",end:"13:05"},{name:"lunch",start:"13:05",end:"14:00"},{name:"8th",start:"14:05",end:"15:40"}]},y={name:"friday",days:["fri"],periods:[{name:"1st/5th",start:"8:15",end:"9:50"},{name:"2nd/6th",start:"9:55",end:"11:25"},{name:"3rd/7th",start:"11:35",end:"13:05"},{name:"lunch",start:"13:05",end:"14:00"},{name:"4th/8th",start:"14:05",end:"15:40"}]},w={name:"noschool",periods:[{name:"1st/5th",start:"8:15",end:"9:50"},{name:"2nd/6th",start:"9:55",end:"11:25"},{name:"3rd/7th",start:"11:35",end:"13:05"},{name:"lunch",start:"13:05",end:"14:00"},{name:"4th/8th",start:"14:05",end:"15:40"}]},x={mon:l,tue:p,wed:v,thu:p,fri:y,sat:w,sun:w},g=[],D=new Date(2015,6,4),A=new Date(2015,8,24);g.push(c(D,A)),$(document).ready(function(){t(),setInterval(t,100)})}(jQuery);